<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c7a7b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/822/822118.png">
    
    <title>Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ 2026</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22%D9%85%D8%AC%D9%85%D8%B9%20%D8%A7%D9%84%D8%B4%D9%81%D8%A7%D8%A1%22,%22short_name%22:%22%D8%A7%D9%84%D8%B4%D9%81%D8%A1%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22%23f8fafc%22,%22theme_color%22:%22%232c7a7b%22,%22description%22:%22%D9%86%D8%B8%D8%A7%D9%85%20%D8%A5%D8%AF%D8%A7%D8%B1%D8%A9%20%D8%A7%D9%84%D9%85%D8%B3%D8%AA%D8%B4%D9%81%D9%8A%D8%A7%D8%AA%20%D9%88%D8%A7%D9%84%D8%B9%D9%8A%D8%A7%D8%AF%D8%A7%D8%AA%20%D8%A7%D9%84%D8%B0%D9%83%D9%8A%22,%22icons%22:[{%22src%22:%22https://cdn-icons-png.flaticon.com/512/822/822118.png%22,%22sizes%22:%22512x512%22,%22type%22:%22image/png%22,%22purpose%22:%22any%22},{%22src%22:%22https://cdn-icons-png.flaticon.com/512/822/822118.png%22,%22sizes%22:%22192x192%22,%22type%22:%22image/png%22,%22purpose%22:%22maskable%22}]}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root { 
            --primary-color: #2c7a7b; 
            --secondary-color: #f0fdf4; 
            --accent-blue: #0d6efd; 
            --accent-red: #dc3545; 
            --accent-green: #198754; 
            --accent-gold: #d4af37;
            --accent-warning: #ffc107;
            --accent-info: #17a2b8;
            --accent-purple: #6f42c1;
        }
        body { background-color: #f8fafc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        .navbar { background: linear-gradient(135deg, var(--primary-color), #1f5a5a) !important; box-shadow: 0 2px 15px rgba(0,0,0,0.2); }
        .card { border-radius: 15px; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 15px; transition: transform 0.2s; }
        .card:hover { transform: translateY(-2px); }
        .hidden-section { display: none !important; }
        .nav-link { cursor: pointer; font-weight: bold; color: var(--primary-color); padding: 10px 20px !important; position: relative; }
        .nav-link.active { background-color: var(--accent-blue) !important; color: white !important; border-radius: 10px; }
        .badge-notify { position: absolute; top: -5px; right: -5px; background: var(--accent-red); color: white; border-radius: 50%; padding: 3px 7px; font-size: 0.7rem; }
        .stat-card { border-radius: 15px; padding: 20px; color: white; text-align: center; }
        .patient-btn { text-align: right; margin-bottom: 8px; border-right: 5px solid var(--primary-color); width: 100%; transition: 0.3s; padding: 12px 15px; background: white; border: 1px solid #dee2e6; border-radius: 10px; }
        .patient-btn.ready { border-right-color: #28a745; background-color: #f0fff4; }
        .patient-btn:hover { background-color: #f8f9fa; }
        .lab-result-item { background: #e9ecef; padding: 10px; border-radius: 8px; margin-bottom: 5px; border-left: 4px solid var(--accent-blue); }
        .section-pane { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @media print { .no-print { display: none !important; } body * { visibility: hidden; } #printArea, #printArea * { visibility: visible; } #printArea { position: absolute; left: 0; top: 0; width: 100%; direction: rtl; padding: 20px; } }
        .search-box { position: relative; }
        .search-box input { padding-right: 40px; }
        .rx-item { background: #f8f9fa; padding: 8px 12px; margin: 5px 0; border-radius: 8px; border-left: 4px solid var(--accent-green); }
        .status-online { color: #28a745; font-weight: bold; }
        .status-offline { color: #dc3545; font-weight: bold; }
        .sync-status { position: fixed; bottom: 10px; left: 10px; z-index: 1000; }
        .sync-btn { position: fixed; bottom: 10px; right: 10px; z-index: 1000; }
        .medical-record { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .nursing-schedule { border-left: 5px solid var(--accent-purple); }
        .expiry-warning { background: #fff3cd; border-left: 5px solid #ffc107; }
        .stock-critical { background: #f8d7da; border-left: 5px solid #dc3545; }
        .library-card { height: 100%; transition: all 0.3s; }
        .library-card:hover { transform: scale(1.02); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
        .form-check { padding-right: 1.5em; margin-bottom: 0.5rem; }
        .form-check-input { margin-right: -1.5em; }
        #labTestsChecklist { scrollbar-width: thin; scrollbar-color: var(--primary-color) #f1f1f1; }
        #labTestsChecklist::-webkit-scrollbar { width: 8px; }
        #labTestsChecklist::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        #labTestsChecklist::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 4px; }
        
        /* PWA Styles */
        .install-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 50px; padding: 10px 20px; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s; }
        .install-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
        .pwa-status { position: fixed; top: 10px; left: 10px; z-index: 9999; }
        .pwa-notification { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); padding: 20px; z-index: 10000; max-width: 400px; direction: rtl; }
        .offline-banner { position: fixed; top: 0; left: 0; right: 0; background: #dc3545; color: white; text-align: center; padding: 10px; z-index: 9998; }
        .online-banner { position: fixed; top: 0; left: 0; right: 0; background: #28a745; color: white; text-align: center; padding: 10px; z-index: 9998; }
        #appVersion { font-size: 0.8em; color: #6c757d; }
        
        /* Advanced Permissions Styles */
        .permission-badge { font-size: 0.7em; padding: 2px 6px; margin-right: 3px; }
        .permission-row { border-bottom: 1px solid #eee; padding: 8px 0; }
        .permission-header { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; padding: 10px; border-radius: 8px; }
        .permission-toggle { transform: scale(0.9); }
        .user-status-online { color: #28a745; animation: pulse 2s infinite; }
        .user-status-offline { color: #dc3545; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
        .role-badge { font-size: 0.75em; padding: 3px 8px; }
        .permission-modal { max-height: 80vh; overflow-y: auto; }
        .password-strength { height: 5px; border-radius: 2px; margin-top: 5px; transition: all 0.3s; }
        
        /* New Styles for Workflow */
        .workflow-step { border-left: 4px solid; padding: 10px; margin: 5px 0; border-radius: 8px; }
        .step-reception { border-color: #0d6efd; background: #e7f1ff; }
        .step-doctor { border-color: #198754; background: #e8f5e8; }
        .step-lab { border-color: #dc3545; background: #fde8e8; }
        .step-pharmacy { border-color: #ffc107; background: #fff8e1; }
        .step-nursing { border-color: #6f42c1; background: #f0e8ff; }
        .step-completed { background: #d4edda !important; }
        .patient-flow { display: flex; justify-content: space-between; margin: 10px 0; }
        .flow-arrow { color: #6c757d; margin: 0 10px; }
        
        /* Admin Dashboard Styles */
        .admin-stat-card { border-radius: 12px; padding: 15px; color: white; text-align: center; min-height: 100px; display: flex; flex-direction: column; justify-content: center; }
        .admin-chart-container { height: 300px; position: relative; }
        .quick-action-btn { width: 100%; margin: 5px 0; }
        .system-health { font-size: 0.9em; }
        .health-good { color: #28a745; }
        .health-warning { color: #ffc107; }
        .health-critical { color: #dc3545; }
        .transaction-item { border-left: 4px solid; padding: 8px; margin: 5px 0; border-radius: 6px; }
        .transaction-income { border-color: #28a745; background: #d4edda; }
        .transaction-expense { border-color: #dc3545; background: #f8d7da; }
        .staff-avatar { width: 40px; height: 40px; border-radius: 50%; background: #6c757d; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        
        /* New Styles from Version 2 */
        .bg-medical { background: #eef2f3; border-right: 5px solid var(--primary-color); }
        .border-purple { border-color: var(--accent-purple) !important; }
        .btn-outline-purple { color: var(--accent-purple); border-color: var(--accent-purple); }
        .btn-outline-purple:hover { background-color: var(--accent-purple); color: white; }
    </style>
</head>
<body>

    <audio id="notificationSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <div id="printArea" class="hidden-section">
        <div class="text-center border-bottom pb-3 mb-3">
            <h2 style="color: var(--primary-color);">ğŸ¥ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ Ø§Ù„Ø·Ø¨ÙŠ</h2>
            <p>Ø§Ù„Ø³ÙˆØ¯Ø§Ù† - Ø¬Ù„Ù‚Ù†ÙŠ</p>
            <h5 id="printTitle">Ø±ÙˆØ´ØªØ© Ø·Ø¨ÙŠØ© / ÙØ§ØªÙˆØ±Ø©</h5>
            <small id="printDate"></small>
        </div>
        <div id="printContent" class="fs-5"></div>
        <div class="mt-5 pt-3 border-top text-center"><p>Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… Ø¹Ø§Ø¬Ù„ Ø§Ù„Ø´ÙØ§Ø¡</p></div>
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginOverlay" class="no-print" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(44, 122, 123, 0.9), rgba(44, 122, 123, 0.8)); z-index: 9999; display: flex; align-items: center; justify-content: center;">
        <div class="card p-4 shadow-lg animate__animated animate__zoomIn" style="width: 380px; border-top: 8px solid var(--accent-gold);">
            <div class="text-center mb-4">
                <img src="https://cdn-icons-png.flaticon.com/512/822/822118.png" width="60">
                <h3 class="mt-2 fw-bold" style="color: var(--primary-color);">Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ Ø§Ù„Ø·Ø¨ÙŠ 2026</h3>
                <p class="text-muted small">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø­Ø¯Ø« - Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</p>
                <div class="mt-2">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="loginMode" id="modeLocal" value="local" checked>
                        <label class="form-check-label" for="modeLocal">ğŸ’¾ Ø¹Ù…Ù„ Ù…Ø­Ù„ÙŠ</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="loginMode" id="modeServer" value="server">
                        <label class="form-check-label" for="modeServer">â˜ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª</label>
                    </div>
                </div>
            </div>
            <input type="text" id="username" class="form-control mb-3" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="password" id="password" class="form-control mb-3" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button class="btn btn-primary w-100 fw-bold" onclick="handleLogin()">ğŸš€ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</button>
            <div class="mt-3 text-center small text-muted" id="loginStatus">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… ÙˆØ¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡</div>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
            ØªØ¹Ø¯ÙŠÙ„ ÙƒÙˆØ¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©

Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø­ÙŠØ« ÙŠØªÙ… Ø¥Ø®ÙØ§Ø¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø¸Ø§Ù…:

```html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c7a7b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/822/822118.png">
    
    <title>Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ 2026</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22%D9%85%D8%AC%D9%85%D8%B9%20%D8%A7%D9%84%D8%B4%D9%81%D8%A7%D8%A1%22,%22short_name%22:%22%D8%A7%D9%84%D8%B4%D9%81%D8%A1%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22%23f8fafc%22,%22theme_color%22:%22%232c7a7b%22,%22description%22:%22%D9%86%D8%B8%D8%A7%D9%85%20%D8%A5%D8%AF%D8%A7%D8%B1%D8%A9%20%D8%A7%D9%84%D9%85%D8%B3%D8%AA%D8%B4%D9%81%D9%8A%D8%A7%D8%AA%20%D9%88%D8%A7%D9%84%D8%B9%D9%8A%D8%A7%D8%AF%D8%A7%D8%AA%20%D8%A7%D9%84%D8%B0%D9%83%D9%8A%22,%22icons%22:[{%22src%22:%22https://cdn-icons-png.flaticon.com/512/822/822118.png%22,%22sizes%22:%22512x512%22,%22type%22:%22image/png%22,%22purpose%22:%22any%22},{%22src%22:%22https://cdn-icons-png.flaticon.com/512/822/822118.png%22,%22sizes%22:%22192x192%22,%22type%22:%22image/png%22,%22purpose%22:%22maskable%22}]}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        /* ... Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ ... */
        /* ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù†Ù…Ø· Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .admin-login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
        }
    </style>
</head>
<body>

    <audio id="notificationSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <div id="printArea" class="hidden-section">
        <!-- ... Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ ... -->
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ø¨Ø¯ÙˆÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø© -->
    <div id="loginOverlay" class="no-print" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(44, 122, 123, 0.9), rgba(44, 122, 123, 0.8)); z-index: 9999; display: flex; align-items: center; justify-content: center;">
        <div class="card p-4 shadow-lg animate__animated animate__zoomIn" style="width: 380px; border-top: 8px solid var(--accent-gold);">
            <div class="text-center mb-4">
                <img src="https://cdn-icons-png.flaticon.com/512/822/822118.png" width="60">
                <h3 class="mt-2 fw-bold" style="color: var(--primary-color);">Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ Ø§Ù„Ø·Ø¨ÙŠ 2026</h3>
                <p class="text-muted small">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø­Ø¯Ø« - Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</p>
                <div class="mt-2">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="loginMode" id="modeLocal" value="local" checked>
                        <label class="form-check-label" for="modeLocal">ğŸ’¾ Ø¹Ù…Ù„ Ù…Ø­Ù„ÙŠ</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="loginMode" id="modeServer" value="server">
                        <label class="form-check-label" for="modeServer">â˜ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª</label>
                    </div>
                </div>
            </div>
            <input type="text" id="username" class="form-control mb-3" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="password" id="password" class="form-control mb-3" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button class="btn btn-primary w-100 fw-bold" onclick="handleLogin()">ğŸš€ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</button>
            <div class="mt-3 text-center small text-muted" id="loginStatus">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</div>
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… - Ù…Ø®ÙÙŠØ© -->
            <div class="mt-3 p-2 bg-light rounded" id="loginHelp" style="display: none;">
                <h6 class="text-center mb-2">ğŸ” Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„:</h6>
                <div class="row small text-muted">
                    <div class="col-12">
                        <div>ğŸ‘‘ Ø§Ù„Ù…Ø¯ÙŠØ±: admin</div>
                        <div>ğŸ‘¨â€âš•ï¸ Ø§Ù„Ø·Ø¨ÙŠØ¨: doctor</div>
                        <div>ğŸ“‹ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„: reception</div>
                        <div>ğŸ’Š Ø§Ù„ØµÙŠØ¯Ù„ÙŠ: pharmacist</div>
                        <div>ğŸ§ª Ø§Ù„Ù…Ø¹Ù…Ù„: lab</div>
                        <div>ğŸ’‰ Ø§Ù„ØªÙ…Ø±ÙŠØ¶: nurse</div>
                    </div>
                </div>
                <p class="text-center mt-2 small">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</p>
            </div>
            
            <div class="text-center mt-3">
                <button class="btn btn-sm btn-outline-secondary" onclick="toggleLoginHelp()">
                    <small>ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</small>
                </button>
                <button class="btn btn-sm btn-outline-info ms-2" onclick="showAdminAccess()">
                    <small>ğŸ”§ ÙˆØµÙˆÙ„ Ø¥Ø¯Ø§Ø±ÙŠ</small>
                </button>
            </div>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ (Ù…Ø­Ù…ÙŠØ© Ø¨ÙƒÙ„Ù…Ø© Ø³Ø± Ø®Ø§ØµØ©) -->
    <div id="adminAccessOverlay" class="admin-login-overlay">
        <div class="card p-4 shadow-lg animate__animated animate__zoomIn" style="width: 380px; border-top: 8px solid var(--accent-red);">
            <div class="text-center mb-4">
                <h4 class="fw-bold text-danger">ğŸ”§ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</h4>
                <p class="text-muted small">Ù„Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙÙ‚Ø·</p>
            </div>
            <input type="password" id="adminAccessPassword" class="form-control mb-3" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ">
            <button class="btn btn-danger w-100 fw-bold" onclick="verifyAdminAccess()">ğŸ”“ Ø¯Ø®ÙˆÙ„</button>
            <button class="btn btn-outline-secondary w-100 mt-2" onclick="hideAdminAccess()">Ø±Ø¬ÙˆØ¹</button>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div id="mainContent" class="hidden-section">
        <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± -->
        <!-- ... -->
    </div>

    <!-- Modals -->
    <!-- ... Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Modals Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ ... -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ============================================
        // Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø£Ù‚Ø³Ø§Ù… (Ù…Ø®ÙÙ‰ Ø¹Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)
        // ============================================

        const USERS = {
            'admin': { password: '123', role: 'admin', name: 'Ø§Ù„Ù…Ø¯ÙŠØ±' },
            'doctor': { password: 'doc123', role: 'doctor', name: 'Ø§Ù„Ø·Ø¨ÙŠØ¨' },
            'reception': { password: 'rec123', role: 'reception', name: 'Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„' },
            'pharmacist': { password: 'ph123', role: 'pharmacy', name: 'Ø§Ù„ØµÙŠØ¯Ù„ÙŠ' },
            'lab': { password: 'lab123', role: 'lab', name: 'Ø§Ù„Ù…Ø¹Ù…Ù„' },
            'nurse': { password: 'nur123', role: 'nursing', name: 'Ø§Ù„ØªÙ…Ø±ÙŠØ¶' }
        };

        // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§ØµØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ (Ù„Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„ÙÙ†ÙŠÙŠÙ† ÙÙ‚Ø·)
        const ADMIN_ACCESS_PASSWORD = 'shifa2026';

        let currentUser = null;
        let patients = JSON.parse(localStorage.getItem('shifa_pats')) || [];
        let labRequests = JSON.parse(localStorage.getItem('shifa_lab')) || [];
        let pharmOrders = JSON.parse(localStorage.getItem('shifa_rx')) || [];
        let nursingTasks = JSON.parse(localStorage.getItem('shifa_nursing_tasks')) || [];
        let financials = JSON.parse(localStorage.getItem('shifa_fin')) || { clinic: 0, lab: 0, pharSales: 0, pharProfit: 0, total: 0 };
        let staffMembers = JSON.parse(localStorage.getItem('shifa_staff')) || [];
        let medicalLibrary = JSON.parse(localStorage.getItem('shifa_library')) || [];
        let backups = JSON.parse(localStorage.getItem('shifa_backups')) || [];
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
        let labTests = JSON.parse(localStorage.getItem('shifa_labTests')) || [
            {name: 'CBC', price: 5000},
            {name: 'Malaria', price: 2000},
            {name: 'Glucose', price: 1000},
            {name: 'Cholesterol', price: 3000}
        ];
        
        let inventory = JSON.parse(localStorage.getItem('shifa_inventory')) || [
            {name: 'Panadol', price: 1000, qty: 100},
            {name: 'Antibiotic', price: 2500, qty: 50},
            {name: 'Vitamin C', price: 1500, qty: 75}
        ];

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        // ============================================

        function toggleLoginHelp() {
            const helpDiv = document.getElementById('loginHelp');
            const button = event.target.closest('button');
            
            if (helpDiv.style.display === 'none') {
                helpDiv.style.display = 'block';
                button.innerHTML = '<small>ğŸ‘ï¸ Ø¥Ø®ÙØ§Ø¡ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</small>';
            } else {
                helpDiv.style.display = 'none';
                button.innerHTML = '<small>ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</small>';
            }
        }

        function showAdminAccess() {
            document.getElementById('adminAccessOverlay').style.display = 'flex';
        }

        function hideAdminAccess() {
            document.getElementById('adminAccessOverlay').style.display = 'none';
            document.getElementById('adminAccessPassword').value = '';
        }

        function verifyAdminAccess() {
            const password = document.getElementById('adminAccessPassword').value;
            
            if (password === ADMIN_ACCESS_PASSWORD) {
                // Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
                alert('ğŸ”§ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©:\n\n' +
                      'ğŸ‘‘ Ø§Ù„Ù…Ø¯ÙŠØ±: admin / 123\n' +
                      'ğŸ‘¨â€âš•ï¸ Ø§Ù„Ø·Ø¨ÙŠØ¨: doctor / doc123\n' +
                      'ğŸ“‹ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„: reception / rec123\n' +
                      'ğŸ’Š Ø§Ù„ØµÙŠØ¯Ù„ÙŠ: pharmacist / ph123\n' +
                      'ğŸ§ª Ø§Ù„Ù…Ø¹Ù…Ù„: lab / lab123\n' +
                      'ğŸ’‰ Ø§Ù„ØªÙ…Ø±ÙŠØ¶: nurse / nur123\n\n' +
                      'âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø³Ø© ÙˆÙ„Ø§ ÙŠØ¬Ø¨ Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§.');
                hideAdminAccess();
            } else {
                alert('âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
            }
        }

        // ============================================
        // Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¨Ø§Ù‚ÙŠ ÙƒÙ…Ø§ Ù‡Ùˆ)
        // ============================================

        function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!');
                return;
            }
            
            if (USERS[username] && USERS[username].password === password) {
                currentUser = {
                    u: username,
                    r: USERS[username].role,
                    name: USERS[username].name
                };
                
                localStorage.setItem('shifa_user', JSON.stringify(currentUser));
                
                document.getElementById('loginOverlay').classList.add('hidden-section');
                document.getElementById('mainContent').classList.remove('hidden-section');
                document.getElementById('currentUserDisplay').textContent = `ğŸ‘¤ ${currentUser.name}`;
                
                // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¯ÙŠØ±Ø§Ù‹
                if (currentUser.r === 'admin') {
                    initAdminSection();
                    switchSection('admin');
                } else {
                    switchSection(currentUser.r);
                }
                
                showNotification(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}`, `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… ${currentUser.name} Ø¨Ù†Ø¬Ø§Ø­!`);
            } else {
                alert('âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!');
            }
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„
        // ============================================

        function registerPatient() {
            const name = document.getElementById('pName').value.trim();
            const age = document.getElementById('pAge').value;
            const ticket = parseFloat(document.getElementById('pTicket').value) || 2000;
            
            if (!name) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶!");
                return;
            }
            
            const patientId = Date.now();
            const newPatient = {
                id: patientId,
                name: name,
                age: age,
                gender: document.getElementById('pGender').value,
                phone: document.getElementById('pPhone').value.trim(),
                address: document.getElementById('pAddress').value,
                ticket: ticket,
                visitType: document.getElementById('pVisitType').value,
                medicalHistory: document.getElementById('pMedicalHistory').value,
                status: 'waiting_doctor',
                department: 'doctor',
                createdAt: new Date().toISOString(),
                time: new Date().toLocaleTimeString('ar-EG'),
                complaint: '',
                diagnosis: '',
                tests: [],
                meds: [],
                nursingInstructions: '',
                vitalSigns: {}
            };
            
            patients.push(newPatient);
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            financials.clinic += newPatient.ticket;
            localStorage.setItem('shifa_fin', JSON.stringify(financials));
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('pName').value = '';
            document.getElementById('pAge').value = '';
            document.getElementById('pPhone').value = '';
            document.getElementById('pAddress').value = '';
            document.getElementById('pMedicalHistory').value = '';
            
            showNotification("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„", `ØªÙ… ØªØ³Ø¬ÙŠÙ„ ${name} ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø·Ø¨ÙŠØ¨`);
            
            updateReceptionStats();
            updateBadges();
            loadReception();
        }

        // ============================================
        // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
        // ============================================

        // ... (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø®Ø±Ù‰ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) ...

        // ============================================
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        // ============================================

        window.onload = function() {
            updateClock();
            setInterval(updateClock, 1000);
            
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            const savedUser = localStorage.getItem('shifa_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('loginOverlay').classList.add('hidden-section');
                document.getElementById('mainContent').classList.remove('hidden-section');
                document.getElementById('currentUserDisplay').textContent = `ğŸ‘¤ ${currentUser.name}`;
                
                if (currentUser.r === 'admin') {
                    initAdminSection();
                    switchSection('admin');
                } else {
                    switchSection(currentUser.r);
                }
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            if (staffMembers.length === 0) {
                staffMembers = Object.keys(USERS).map(username => ({
                    u: username,
                    p: USERS[username].password,
                    r: USERS[username].role,
                    name: USERS[username].name,
                    status: 'active',
                    created: new Date().toISOString()
                }));
                localStorage.setItem('shifa_staff', JSON.stringify(staffMembers));
            }
            
            if (medicalLibrary.length === 0) {
                medicalLibrary = [
                    {
                        id: 1,
                        title: 'Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ',
                        category: 'diseases',
                        content: 'Ù…Ø±Ø¶ Ù…Ø²Ù…Ù† ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¹Ø¬Ø² Ø§Ù„Ø¨Ù†ÙƒØ±ÙŠØ§Ø³ Ø¹Ù† Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø¨ÙƒÙ…ÙŠØ© ÙƒØ§ÙÙŠØ©...',
                        addedBy: 'system',
                        addedAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        title: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„',
                        category: 'drugs',
                        content: 'Ù…Ø³ÙƒÙ† Ù„Ù„Ø£Ù„Ù… ÙˆØ®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©ØŒ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…Ø¹ØªØ§Ø¯Ø© 500-1000 Ù…Ø¬Ù… ÙƒÙ„ 6-8 Ø³Ø§Ø¹Ø§Øª...',
                        addedBy: 'system',
                        addedAt: new Date().toISOString()
                    }
                ];
                localStorage.setItem('shifa_library', JSON.stringify(medicalLibrary));
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ badges
            updateBadges();
        };

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ©
        // ============================================

        function updateClock() {
            const now = new Date();
            const clockElement = document.getElementById('clockDisplay');
            if (clockElement) {
                clockElement.textContent = now.toLocaleTimeString('ar-EG');
            }
        }

        function showNotification(title, message) {
            console.log(`ğŸ”” ${title}: ${message}`);
            
            try {
                document.getElementById('notificationSound').play();
            } catch (e) {}
            
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, {
                    body: message,
                    icon: 'https://cdn-icons-png.flaticon.com/512/822/822118.png'
                });
            }
        }

        function playNotify() {
            try {
                document.getElementById('notificationSound').play();
            } catch (e) {}
        }

        // ============================================
        // Ø¯Ø§Ù„Ø© ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        // ============================================

        function changePassword() {
            const modal = new bootstrap.Modal(document.getElementById('changePasswordModal'));
            modal.show();
        }

        function confirmPasswordChange() {
            const currentPass = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;
            
            if (!currentPass || !newPass || !confirmPass) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„!');
                return;
            }
            
            if (newPass !== confirmPass) {
                alert('âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©!');
                return;
            }
            
            if (newPass.length < 4) {
                alert('âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }
            
            // ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            USERS[currentUser.u].password = newPass;
            
            // ØªØ­Ø¯ÙŠØ« ÙÙŠ staffMembers
            const staff = staffMembers.find(s => s.u === currentUser.u);
            if (staff) {
                staff.p = newPass;
                localStorage.setItem('shifa_staff', JSON.stringify(staffMembers));
            }
            
            alert('âœ… ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!');
            const modal = bootstrap.Modal.getInstance(document.getElementById('changePasswordModal'));
            modal.hide();
        }

    </script>
</body>
</html>
```

Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ø¬Ø±Ø§Ø¤Ù‡Ø§:

1. Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

Â· ØªÙ… Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… "Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù…" ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
Â· ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù‚Ø³Ù… Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø®ÙÙŠ ÙŠÙ…ÙƒÙ† Ø¥Ø¸Ù‡Ø§Ø±Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø±

2. Ø¥Ø¶Ø§ÙØ© Ø·Ø¨Ù‚Ø© Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©:

Â· Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø´Ø© "Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ" Ù…Ø­Ù…ÙŠØ© Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§ØµØ© (shifa2026)
Â· ÙÙ‚Ø· Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙˆØ§Ù„ÙÙ†ÙŠÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©

3. ÙˆØ¸Ø§Ø¦Ù Ø¬Ø¯ÙŠØ¯Ø©:

Â· Ø²Ø± "Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†" (Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±)
Â· Ø²Ø± "Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø©
Â· ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§ØµØ© Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ

4. ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†:

Â· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø© Ù„Ù… ØªØ¹Ø¯ Ù…Ø±Ø¦ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©
Â· Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…
Â· ØªØ­Ø°ÙŠØ±Ø§Øª Ø¹Ù†Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­ Ø¨Ù‡

Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:

1. Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¹Ø§Ø¯ÙŠÙŠÙ†:
   Â· ÙŠØ¯Ø®Ù„ÙˆÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¹Ø·Ø§Ø© Ù„Ù‡Ù…
   Â· Ø¥Ø°Ø§ Ù†Ø³ÙˆØ§ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŒ ÙŠØªÙˆØ§ØµÙ„ÙˆÙ† Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ±
2. Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙˆØ§Ù„ÙÙ†ÙŠÙŠÙ†:
   Â· ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø²Ø± "Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ"
   Â· ÙŠØ¯Ø®Ù„ÙˆÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± shifa2026
   Â· ÙŠØ­ØµÙ„ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
3. Ù„Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙ‚Ø·:
   Â· Ø²Ø± "Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†" ÙŠØ¸Ù‡Ø± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙ‚Ø·
   Â· Ø¯ÙˆÙ† Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±

Ù‡Ø°Ø§ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø£Ù…Ø§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¹ ØªÙˆÙÙŠØ± ÙˆØ³ÙŠÙ„Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…ØµØ±Ø­ Ù„Ù‡Ù….
                </div>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div id="mainContent" class="hidden-section">
        <!-- PWA Status -->
        <div class="pwa-status no-print">
            <div id="pwaStatus" class="badge bg-info">PWA: Ù†Ø´Ø·</div>
        </div>
        
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
        <nav class="navbar navbar-dark mb-4 no-print">
            <div class="container d-flex justify-content-between text-white align-items-center">
                <span class="navbar-brand fw-bold">ğŸ¥ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø´ÙØ§Ø¡ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© 2026</span>
                <div>
                    <span id="currentUserDisplay" class="badge bg-light text-dark mx-2"></span>
                    <span id="clockDisplay" class="badge bg-info text-dark"></span>
                    <span id="connectionStatus" class="badge bg-success mx-2">Ù…ØªØµÙ„ Ù…Ø­Ù„ÙŠØ§Ù‹</span>
                    <button class="btn btn-sm btn-outline-light ms-2" onclick="openUserMenu()">ğŸ‘¤</button>
                </div>
                <button class="btn btn-sm btn-outline-light" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
        </nav>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ -->
        <div class="container">
            <ul class="nav nav-pills mb-4 shadow-sm p-2 bg-white rounded-4 justify-content-center no-print" id="mainTabs">
                <li class="nav-item" id="tab-reception-li"><button class="nav-link" id="btn-reception" onclick="switchSection('reception')">ğŸ“‹ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</button></li>
                <li class="nav-item" id="tab-doctor-li"><button class="nav-link" id="btn-doctor" onclick="switchSection('doctor')">ğŸ‘¨â€âš•ï¸ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© <span id="doctorBadge" class="badge-notify hidden-section">0</span></button></li>
                <li class="nav-item" id="tab-lab-li"><button class="nav-link" id="btn-lab" onclick="switchSection('lab')">ğŸ§ª Ø§Ù„Ù…Ø¹Ù…Ù„ <span id="labBadge" class="badge-notify hidden-section">0</span></button></li>
                <li class="nav-item" id="tab-pharmacy-li"><button class="nav-link" id="btn-pharmacy" onclick="switchSection('pharmacy')">ğŸ’Š Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© <span id="pharBadge" class="badge-notify hidden-section">0</span></button></li>
                <li class="nav-item" id="tab-nursing-li"><button class="nav-link" id="btn-nursing" onclick="switchSection('nursing')">ğŸ’‰ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ <span id="nurseBadge" class="badge-notify hidden-section">0</span></button></li>
                <li class="nav-item" id="tab-admin-li"><button class="nav-link" id="btn-admin" onclick="switchSection('admin')">ğŸ‘‘ Ø§Ù„Ù…Ø¯ÙŠØ±</button></li>
            </ul>

            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
            <div class="tab-content">
                <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ - Ù…Ø¯Ù…Ø¬ -->
                <div id="reception-sec" class="section-pane">
                    <div class="row">
                        <div class="col-md-5">
                            <div class="card p-4 border-top border-primary border-4">
                                <h4 class="fw-bold mb-3">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯</h4>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                                    <input type="text" id="pName" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ">
                                </div>
                                <div class="row mb-3">
                                    <div class="col-4">
                                        <label class="form-label">Ø§Ù„Ø¹Ù…Ø±</label>
                                        <input type="number" id="pAge" class="form-control" placeholder="Ø§Ù„Ø¹Ù…Ø±">
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label">Ø§Ù„Ø¬Ù†Ø³</label>
                                        <select id="pGender" class="form-select">
                                            <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                                            <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                                        </select>
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
                                        <select id="pVisitType" class="form-select">
                                            <option value="Ø²ÙŠØ§Ø±Ø© Ø¹Ø§Ø¯ÙŠØ©">Ø¹Ø§Ø¯ÙŠØ©</option>
                                            <option value="Ù…ØªØ§Ø¨Ø¹Ø©">Ù…ØªØ§Ø¨Ø¹Ø©</option>
                                            <option value="Ø·ÙˆØ§Ø±Ø¦">Ø·ÙˆØ§Ø±Ø¦</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† / Ø§Ù„Ø³ÙƒÙ†</label>
                                    <input type="text" id="pAddress" class="form-control" placeholder="Ø§Ù„Ø³ÙƒÙ† / Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                                    <input type="tel" id="pPhone" class="form-control" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                                </div>
                                <div class="mb-3 bg-light p-2 rounded">
                                    <label class="form-label fw-bold">Ø±Ø³ÙˆÙ… ØªØ°ÙƒØ±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨</label>
                                    <input type="number" id="pTicket" class="form-control" value="2000">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª / ØªØ§Ø±ÙŠØ® Ù…Ø±Ø¶ÙŠ</label>
                                    <textarea id="pMedicalHistory" class="form-control" rows="2" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"></textarea>
                                </div>
                                <button class="btn btn-primary w-100 fw-bold" onclick="registerPatient()">âœ… Ø­ÙØ¸ ÙˆØ¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø·Ø¨ÙŠØ¨</button>
                            </div>
                        </div>
                        
                        <div class="col-md-7">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="stat-card bg-primary shadow">
                                        <h6 class="mb-1">ğŸ‘¥ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¬Ø¯Ø¯</h6>
                                        <h2 id="receptionNewPatients">0</h2>
                                        <small>Ù…Ø±ÙŠØ¶</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="stat-card bg-success shadow">
                                        <h6 class="mb-1">ğŸ’° Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <h2 id="receptionRevenue">0</h2>
                                        <small>Ø¬Ù†ÙŠØ©</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card p-4 mt-4">
                                <h4 class="fw-bold mb-3">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„ÙŠÙˆÙ…</h4>
                                <div class="search-box mb-3">
                                    <input type="text" class="form-control" placeholder="ğŸ” Ø¨Ø­Ø« Ø¹Ù† Ù…Ø±ÙŠØ¶..." id="searchPatient" onkeyup="searchPatients(this.value)">
                                </div>
                                <div id="receptionList" style="max-height: 400px; overflow-y: auto;">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© - Ù…Ø¯Ù…Ø¬ -->
                <div id="doctor-sec" class="section-pane hidden-section">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card p-4">
                                <h4 class="fw-bold mb-3">ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h4>
                                <div id="doctorQueue" style="max-height: 500px; overflow-y: auto;">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div id="doctorWorkArea" class="card p-4 hidden-section border-top border-success border-5">
                                <h4 class="fw-bold mb-3">ğŸ‘¨â€âš•ï¸ ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…Ø±ÙŠØ¶</h4>
                                <div id="doctorPatientInfo" class="mb-3">
                                    <h5 id="currentPatientName" class="text-success fw-bold"></h5>
                                    <p id="currentPatientDetails" class="text-muted"></p>
                                    <input type="hidden" id="selectedPatientId">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Ø´ÙƒÙˆÙ‰ Ø§Ù„Ù…Ø±ÙŠØ¶</label>
                                    <textarea id="complaint" class="form-control" rows="2" placeholder="ÙˆØµÙ Ø§Ù„Ø´ÙƒÙˆÙ‰"></textarea>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Ø·Ù„Ø¨ ÙØ­ÙˆØµØ§Øª:</label>
                                        <select id="labSelect" class="form-select mb-2" multiple style="height: 150px;"></select>
                                        <button class="btn btn-outline-danger w-100" onclick="orderLab()">ğŸ§ª Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø¹Ù…Ù„</button>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ÙˆØµÙ Ø§Ù„Ø¯ÙˆØ§Ø¡:</label>
                                        <select id="medicineSelect" class="form-select mb-2" multiple style="height: 150px;"></select>
                                        <button class="btn btn-outline-warning w-100" onclick="orderPharmacy()">ğŸ’Š Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØµÙŠØ¯Ù„ÙŠØ©</button>
                                    </div>
                                </div>
                                
                                <div class="mb-3 p-2 bg-light rounded">
                                    <label class="form-label fw-bold">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ØªÙ…Ø±ÙŠØ¶ÙŠØ© (Ø­Ù‚Ù†/Ø¯Ø±ÙŠØ¨Ø§Øª):</label>
                                    <textarea id="nursingInstructions" class="form-control mb-2" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª..."></textarea>
                                    <button class="btn btn-outline-purple w-100" onclick="orderNurse()">ğŸ’‰ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ¶</button>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</label>
                                    <textarea id="diagnosis" class="form-control" rows="3" placeholder="Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ"></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ©</label>
                                    <div class="row">
                                        <div class="col-3 mb-2">
                                            <input type="text" id="vitalBP" class="form-control" placeholder="Ø§Ù„Ø¶ØºØ·">
                                        </div>
                                        <div class="col-3 mb-2">
                                            <input type="text" id="vitalTemp" class="form-control" placeholder="Ø§Ù„Ø­Ø±Ø§Ø±Ø©">
                                        </div>
                                        <div class="col-3 mb-2">
                                            <input type="text" id="vitalPulse" class="form-control" placeholder="Ø§Ù„Ù†Ø¨Ø¶">
                                        </div>
                                        <div class="col-3 mb-2">
                                            <input type="text" id="vitalWeight" class="form-control" placeholder="Ø§Ù„ÙˆØ²Ù†">
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn btn-success w-100 fw-bold" onclick="completeDoctorVisit()">ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙƒØ´Ù ÙˆØ§Ù„Ø²ÙŠØ§Ø±Ø©</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù…Ù„ - Ù…Ø¯Ù…Ø¬ -->
                <div id="lab-sec" class="section-pane hidden-section">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card p-4 border-top border-danger border-5">
                                <h4 class="fw-bold mb-3">ğŸ§ª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ­ÙˆØµØ§Øª</h4>
                                <div id="labPatientInfo" class="mb-3">
                                    <p class="text-muted">Ø§Ø®ØªØ± ÙØ­ØµØ§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</p>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­Øµ</label>
                                    <textarea id="labResult" class="form-control" rows="4" placeholder="Ø£Ø¯Ø®Ù„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­Øµ"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙ†ÙŠØ©</label>
                                    <textarea id="labNotes" class="form-control" rows="2" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"></textarea>
                                </div>
                                <button class="btn btn-success w-100 fw-bold" onclick="saveLabResult()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
                                <button class="btn btn-info w-100 fw-bold mt-2" onclick="printLabReport()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="card p-4 border-top border-danger border-5">
                                <h4 class="fw-bold mb-3">ğŸ§ª Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙØ­Øµ Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h4>
                                <div class="row g-3" id="labList">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© - Ù…Ø¯Ù…Ø¬ -->
                <div id="pharmacy-sec" class="section-pane hidden-section">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card p-4 border-top border-warning border-5">
                                <h4 class="fw-bold mb-3">ğŸ’Š ØµØ±Ù Ø§Ù„Ø±ÙˆØ´ØªØ§Øª</h4>
                                <div id="pharmacyPatientInfo" class="mb-3">
                                    <p class="text-muted">Ø§Ø®ØªØ± Ø±ÙˆØ´ØªØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</p>
                                </div>
                                <div id="pharmacyMedications">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                                <button class="btn btn-success w-100 fw-bold mt-3" onclick="dispenseMedications()">âœ… ØµØ±Ù Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</button>
                                <button class="btn btn-info w-100 fw-bold mt-2" onclick="printPharmacyInvoice()">ğŸ§¾ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="card p-4 border-top border-warning border-5">
                                <h4 class="fw-bold mb-3">ğŸ’Š Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©</h4>
                                <div class="row g-3" id="pharmacyList">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ¶ - Ù…Ø¯Ù…Ø¬ -->
                <div id="nursing-sec" class="section-pane hidden-section">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card p-4 border-top border-purple border-5">
                                <h4 class="fw-bold mb-3">ğŸ’‰ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ¶ÙŠØ©</h4>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„Ù…Ø±ÙŠØ¶</label>
                                    <select id="nursingPatient" class="form-select" onchange="loadNursingTasks()">
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±ÙŠØ¶</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù‡Ù…Ø©</label>
                                    <select id="nursingTaskType" class="form-select">
                                        <option value="Ø­Ù‚Ù†Ø©">ğŸ’‰ Ø­Ù‚Ù†Ø©</option>
                                        <option value="ØªÙ†Ù‚ÙŠØ·">ğŸ’§ ØªÙ†Ù‚ÙŠØ·</option>
                                        <option value="Ù‚ÙŠØ§Ø³">ğŸ“ Ù‚ÙŠØ§Ø³ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø­ÙŠÙˆÙŠØ©</option>
                                        <option value="Ø¹Ù†Ø§ÙŠØ©">ğŸ©¹ Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¬Ø±ÙˆØ­</option>
                                        <option value="Ø£Ø®Ø±Ù‰">ğŸ“ Ù…Ù‡Ù…Ø© Ø£Ø®Ø±Ù‰</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„ØªÙØ§ØµÙŠÙ„</label>
                                    <textarea id="nursingTaskDetails" class="form-control" rows="3" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
                                    <input type="time" id="nursingTaskTime" class="form-control">
                                </div>
                                <button class="btn btn-success w-100 fw-bold" onclick="addNursingTask()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©</button>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="card p-4 border-top border-purple border-5">
                                <h4 class="fw-bold mb-3">ğŸ’‰ ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ¶</h4>
                                <div class="row g-3" id="nurseList">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„ - Ù…Ø¯Ù…Ø¬ -->
                <div id="admin-sec" class="section-pane hidden-section">
                    <div class="row g-3 mb-4 text-white">
                        <div class="col-md-3">
                            <div class="stat-card bg-primary shadow">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">ğŸ¦ Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <h2 id="admIncClinic">0</h2>
                                        <small>Ø¬Ù†ÙŠÙ‡</small>
                                    </div>
                                    <div class="fs-1">ğŸ’°</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card bg-danger shadow">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">ğŸ§ª Ù…Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <h2 id="admIncLab">0</h2>
                                        <small>Ø¬Ù†ÙŠÙ‡</small>
                                    </div>
                                    <div class="fs-1">ğŸ”¬</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card bg-success shadow">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">ğŸ’Š ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <h2 id="admIncPhar">0</h2>
                                        <small>Ø¬Ù†ÙŠÙ‡</small>
                                    </div>
                                    <div class="fs-1">ğŸ’Š</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card bg-dark shadow">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <h2 id="admIncTotal">0</h2>
                                        <small>Ø¬Ù†ÙŠÙ‡</small>
                                    </div>
                                    <div class="fs-1">ğŸ“Š</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8">
                            <div class="card p-4 border-top border-3 border-info shadow">
                                <h5 class="fw-bold mb-3">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø© 2026</h5>
                                
                                <ul class="nav nav-tabs mb-3">
                                    <li class="nav-item"><button class="nav-link active" onclick="showAdminTab('dashboard')">Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('reports')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('patients')">Ø§Ù„Ù…Ø±Ø¶Ù‰</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('staff')">ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('financial')">ğŸ’° Ø§Ù„Ù…Ø§Ù„ÙŠØ©</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('labTests')">ğŸ§ª Ø§Ù„ÙØ­ÙˆØµØ§Øª</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('inventory')">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button></li>
                                    <li class="nav-item"><button class="nav-link" onclick="showAdminTab('settings')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button></li>
                                </ul>
                                
                                <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                                <div id="admin-dashboard">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ“ˆ Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…</h6>
                                                <div class="mt-3">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span>Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¬Ø¯Ø¯</span>
                                                        <strong id="todayNewPatients">0</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span>Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</span>
                                                        <strong id="todayCompletedTests">0</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span>Ø§Ù„Ø±ÙˆØ´ØªØ§Øª Ø§Ù„Ù…ØµØ±Ù‘ÙØ©</span>
                                                        <strong id="todayDispensedRx">0</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span>Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ¶</span>
                                                        <strong id="todayNursingTasks">0</strong>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</h6>
                                                <div id="activeStaffList" class="mt-2" style="max-height: 150px; overflow-y: auto;"></div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ“‹ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h6>
                                                <div id="adminAlerts" style="max-height: 200px; overflow-y: auto;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
                                <div id="admin-reports" class="hidden-section">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ“ˆ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h6>
                                                <div class="text-center py-4">
                                                    <canvas id="dailyRevenueChart" height="150"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ‘¥ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¶Ù‰</h6>
                                                <div class="text-center py-4">
                                                    <canvas id="patientsChart" height="150"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="card p-3 bg-light">
                                                <h6>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡</h6>
                                                <div class="btn-group w-100 mb-3">
                                                    <button class="btn btn-outline-dark btn-sm" onclick="renderReport('day')">ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</button>
                                                    <button class="btn btn-outline-dark btn-sm" onclick="renderReport('week')">Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
                                                    <button class="btn btn-outline-dark btn-sm" onclick="renderReport('month')">Ø´Ù‡Ø±ÙŠ</button>
                                                </div>
                                                <div id="reportArea" class="bg-light p-3 rounded">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø¹Ø±Ø¶...</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ -->
                                <div id="admin-patients" class="hidden-section">
                                    <h6 class="fw-bold">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</h6>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <input type="text" class="form-control" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰..." id="adminPatientSearch" onkeyup="searchAdminPatients(this.value)">
                                        </div>
                                        <div class="col-md-3">
                                            <button class="btn btn-info w-100" onclick="exportMedicalRecords()">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø³Ø¬Ù„Ø§Øª</button>
                                        </div>
                                        <div class="col-md-3">
                                            <button class="btn btn-danger w-100" onclick="clearAllPatientData()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                                        </div>
                                    </div>
                                    <div id="adminPatientsTable" style="max-height: 300px; overflow-y: auto;"></div>
                                </div>
                                
                                <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† -->
                                <div id="admin-staff" class="hidden-section">
                                    <h6 class="fw-bold">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡</h6>
                                    <div class="row g-2 mb-3">
                                        <div class="col-4">
                                            <input type="text" id="newStaffUser" class="form-control form-control-sm" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                                        </div>
                                        <div class="col-4">
                                            <input type="text" id="newStaffPass" class="form-control form-control-sm" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                                        </div>
                                        <div class="col-4">
                                            <select id="newStaffRole" class="form-select form-select-sm">
                                                <option value="admin">Ù…Ø¯ÙŠØ± Ù†Ø¸Ø§Ù…</option>
                                                <option value="doctor">Ø·Ø¨ÙŠØ¨</option>
                                                <option value="reception">Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</option>
                                                <option value="pharmacist">ØµÙŠØ¯Ù„ÙŠ</option>
                                                <option value="lab">Ù…Ø¹Ù…Ù„</option>
                                                <option value="nurse">ØªÙ…Ø±ÙŠØ¶</option>
                                            </select>
                                        </div>
                                        <div class="col-12">
                                            <button class="btn btn-dark btn-sm w-100" onclick="addNewStaff()">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯</button>
                                        </div>
                                    </div>
                                    <div class="row g-2 mb-3">
                                        <div class="col-6">
                                            <button class="btn btn-outline-info btn-sm w-100" onclick="resetUserPassword()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
                                        </div>
                                        <div class="col-6">
                                            <button class="btn btn-outline-warning btn-sm w-100" onclick="exportUserActivity()">ğŸ“Š ØªØµØ¯ÙŠØ± Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</button>
                                        </div>
                                    </div>
                                    <table class="table table-bordered text-center table-sm table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                                <th>Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>
                                                <th>Ø§Ù„Ù†Ø´Ø§Ø·</th>
                                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                                <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
                                            </tr>
                                        </thead>
                                        <tbody id="staffTableBody"></tbody>
                                    </table>
                                </div>
                                
                                <!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
                                <div id="admin-financial" class="hidden-section">
                                    <h6 class="fw-bold">ğŸ’° Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h6>
                                    <div class="row g-3 mb-3">
                                        <div class="col-md-6">
                                            <div class="card bg-light p-3">
                                                <h6>ğŸ’µ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h6>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©:</span>
                                                    <strong id="dailyClinicRevenue">0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ø§Ù„Ù…Ø¹Ù…Ù„:</span>
                                                    <strong id="dailyLabRevenue">0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©:</span>
                                                    <strong id="dailyPharmacyRevenue">0</strong>
                                                </div>
                                                <hr>
                                                <div class="d-flex justify-content-between text-success">
                                                    <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                                                    <strong id="dailyTotalRevenue">0</strong>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card bg-light p-3">
                                                <h6>ğŸ“… Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h6>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
                                                    <strong id="monthlyRevenue">0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ:</span>
                                                    <strong id="lastMonthRevenue">0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ù…Ùˆ:</span>
                                                    <strong id="revenueGrowth">0%</strong>
                                                </div>
                                                <hr>
                                                <button class="btn btn-sm btn-outline-primary w-100" onclick="generateFinancialReport()">ğŸ“„ ØªÙ‚Ø±ÙŠØ± Ù…Ø§Ù„ÙŠ Ù…ÙØµÙ„</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card bg-light p-3">
                                        <h6>ğŸ“Š Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„ÙŠÙˆÙ…</h6>
                                        <div id="financialTransactions" style="max-height: 200px; overflow-y: auto;"></div>
                                    </div>
                                </div>
                                
                                <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ­ÙˆØµØ§Øª -->
                                <div id="admin-labTests" class="hidden-section">
                                    <h6 class="fw-bold">ğŸ§ª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù…Ø¹Ù…Ù„ÙŠØ©</h6>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <div class="card p-3">
                                                <h6>â• Ø¥Ø¶Ø§ÙØ© ÙØ­Øµ Ø¬Ø¯ÙŠØ¯</h6>
                                                <input type="text" id="admLabName" class="form-control mb-2" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ­Øµ">
                                                <input type="number" id="admLabPrice" class="form-control mb-2" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                                                <button class="btn btn-danger btn-sm w-100" onclick="adminAddLab()">Ø­ÙØ¸ Ø§Ù„ÙØ­Øµ</button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card p-3">
                                                <h6>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ­ÙˆØµØ§Øª</h6>
                                                <div id="labTestsList" style="max-height: 300px; overflow-y: auto;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
                                <div id="admin-inventory" class="hidden-section">
                                    <h6 class="fw-bold">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</h6>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <div class="card p-3">
                                                <h6>â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ø¡ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</h6>
                                                <input type="text" id="admMedName" class="form-control mb-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡">
                                                <input type="number" id="admMedPrice" class="form-control mb-2" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                                                <input type="number" id="admMedQty" class="form-control mb-2" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
                                                <button class="btn btn-warning btn-sm w-100" onclick="adminAddMed()">Ø­ÙØ¸ Ø§Ù„Ø¯ÙˆØ§Ø¡</button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card p-3">
                                                <h6>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</h6>
                                                <div id="inventoryList" style="max-height: 300px; overflow-y: auto;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
                                <div id="admin-settings" class="hidden-section">
                                    <h6 class="fw-bold">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h6>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="card bg-light p-3">
                                                <h6>ğŸ”” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h6>
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input" type="checkbox" id="notificationsEnabled" checked>
                                                    <label class="form-check-label" for="notificationsEnabled">ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</label>
                                                </div>
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input" type="checkbox" id="soundEnabled" checked>
                                                    <label class="form-check-label" for="soundEnabled">ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØµÙˆØª</label>
                                                </div>
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input" type="checkbox" id="autoBackupEnabled">
                                                    <label class="form-check-label" for="autoBackupEnabled">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</label>
                                                </div>
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input" type="checkbox" id="autoSyncEnabled">
                                                    <label class="form-check-label" for="autoSyncEnabled">Ù…Ø²Ø§Ù…Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card bg-light p-3">
                                                <h6>ğŸ”„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</h6>
                                                <div class="mb-2">
                                                    <label class="form-label">ÙØªØ±Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</label>
                                                    <select class="form-select" id="syncInterval">
                                                        <option value="5">ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
                                                        <option value="15" selected>ÙƒÙ„ 15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
                                                        <option value="30">ÙƒÙ„ 30 Ø¯Ù‚ÙŠÙ‚Ø©</option>
                                                        <option value="60">ÙƒÙ„ Ø³Ø§Ø¹Ø©</option>
                                                    </select>
                                                </div>
                                                <div class="mb-2">
                                                    <label class="form-label">Ø­Ø¯ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</label>
                                                    <select class="form-select" id="backupLimit">
                                                        <option value="7">7 Ø£ÙŠØ§Ù…</option>
                                                        <option value="15" selected>15 ÙŠÙˆÙ…</option>
                                                        <option value="30">30 ÙŠÙˆÙ…</option>
                                                        <option value="90">90 ÙŠÙˆÙ…</option>
                                                    </select>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary w-100" onclick="saveSystemSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="card bg-light p-3">
                                                <h6>ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h6>
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <p><strong>Ø§Ù„Ø¥ØµØ¯Ø§Ø±:</strong> 4.0.0 (2026)</p>
                                                        <p><strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> <span id="lastUpdate">2026-01-01</span></p>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p><strong>Ù…Ø³Ø§Ø­Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†:</strong> <span id="storageUsage">0 KB</span></p>
                                                        <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</strong> <span id="backupCount">0</span></p>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p><strong>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:</strong> <span id="systemHealth" class="health-good">Ø¬ÙŠØ¯Ø©</span></p>
                                                        <p><strong>Ø¢Ø®Ø± ÙØ­Øµ:</strong> <span id="lastSystemCheck">Ø§Ù„Ø¢Ù†</span></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø±ÙŠØ¹ -->
                            <div class="card mt-3 p-3 bg-light border-danger">
                                <h6 class="fw-bold text-danger">âš ï¸ Ø£Ø¯ÙˆØ§Øª ØªØ­ÙƒÙ… Ø³Ø±ÙŠØ¹Ø©</h6>
                                <div class="row g-2">
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-danger btn-sm w-100" onclick="resetSection('pats')">
                                            <small>ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</small>
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-danger btn-sm w-100" onclick="resetSection('lab')">
                                            <small>ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„Ù…Ø¹Ù…Ù„</small>
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-danger btn-sm w-100" onclick="resetSection('rx')">
                                            <small>ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</small>
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-danger btn-sm w-100" onclick="resetSection('nursing')">
                                            <small>ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„ØªÙ…Ø±ÙŠØ¶</small>
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-danger btn-sm w-100" onclick="resetAllDay()">
                                            <small>ğŸ“Š Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙŠÙˆÙ…</small>
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-success btn-sm w-100" onclick="generateDailyReport()">
                                            <small>ğŸ“„ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</small>
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-info btn-sm w-100" onclick="backupAllData()">
                                            <small>ğŸ’¾ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ</small>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
                        <div class="col-md-4">
                            <!-- Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø·Ø¨ÙŠØ© -->
                            <div class="card p-4 border-top border-3 border-warning shadow library-card">
                                <h5 class="fw-bold text-warning mb-3">ğŸ“š Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø·Ø¨ÙŠØ©</h5>
                                <div class="input-group mb-3">
                                    <input type="text" id="searchMedicalLibrary" class="form-control" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ù…Ø±Ø¶ØŒ Ø¯ÙˆØ§Ø¡ØŒ Ø¥Ø¬Ø±Ø§Ø¡...">
                                    <button class="btn btn-warning" onclick="searchMedicalLibrary()">ğŸ”</button>
                                </div>
                                <div class="mb-3">
                                    <select class="form-select" onchange="filterLibrary(this.value)">
                                        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</option>
                                        <option value="diseases">Ø§Ù„Ø£Ù…Ø±Ø§Ø¶</option>
                                        <option value="drugs">Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</option>
                                        <option value="procedures">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</option>
                                        <option value="tests">Ø§Ù„ÙØ­ÙˆØµØ§Øª</option>
                                    </select>
                                </div>
                                <div id="medicalLibraryContent" style="max-height: 300px; overflow-y: auto;"></div>
                                <button class="btn btn-outline-warning w-100 mt-3" onclick="addToLibrary()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø¹Ù„Ù…ÙŠØ©</button>
                            </div>
                            
                            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
                            <div class="card p-3 mt-3 border-info">
                                <h6 class="fw-bold text-info">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h6>
                                <div class="row text-center">
                                    <div class="col-6 mb-2">
                                        <div class="bg-light p-2 rounded">
                                            <h5 id="totalPatientsCount">0</h5>
                                            <small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±Ø¶Ù‰</small>
                                        </div>
                                    </div>
                                    <div class="col-6 mb-2">
                                        <div class="bg-light p-2 rounded">
                                            <h5 id="totalStaffCount">0</h5>
                                            <small>Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="bg-light p-2 rounded">
                                            <h5 id="totalInventoryItems">0</h5>
                                            <small>Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="bg-light p-2 rounded">
                                            <h5 id="totalRevenueAll">0</h5>
                                            <small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ø¢Ø®Ø± Ø§Ù„Ø£Ù†Ø´Ø·Ø© -->
                            <div class="card p-3 mt-3 border-success">
                                <h6 class="fw-bold text-success">ğŸ“ Ø¢Ø®Ø± Ø§Ù„Ø£Ù†Ø´Ø·Ø©</h6>
                                <div id="recentActivities" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="changePasswordModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
                        <input type="password" id="currentPassword" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                        <input type="password" id="newPassword" class="form-control" onkeyup="checkPasswordStrength()">
                        <div class="password-strength" id="passwordStrength"></div>
                        <small class="text-muted">ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ØŒ Ø­Ø±ÙˆÙ ÙƒØ¨ÙŠØ±Ø© ÙˆØµØºÙŠØ±Ø©ØŒ ÙˆØ£Ø±Ù‚Ø§Ù…</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                                        <input type="password" id="confirmPassword" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-primary" onclick="confirmPasswordChange()">ØªØºÙŠÙŠØ±</button>
                </div>
            </div>
        </div>
    </div>

    <div id="userMenuModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title">ğŸ‘¤ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <div class="bg-light rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                            <span class="fs-3">ğŸ‘¤</span>
                        </div>
                        <h5 class="mt-2" id="userNameDisplay"></h5>
                        <span class="badge bg-primary" id="userRoleDisplay"></span>
                    </div>
                    <div class="list-group">
                        <button class="list-group-item list-group-item-action" onclick="changePasswordModal()">
                            ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                        </button>
                        <button class="list-group-item list-group-item-action" onclick="viewMyActivity()">
                            ğŸ“‹ Ø³Ø¬Ù„ Ù†Ø´Ø§Ø·ÙŠ
                        </button>
                        <button class="list-group-item list-group-item-action" onclick="toggleDarkMode()">
                            ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <small class="text-muted" id="lastLoginDisplay"></small>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ============================================
        // Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
        // ============================================

        const USERS = {
            'admin': { password: '123', role: 'admin', name: 'Ø§Ù„Ù…Ø¯ÙŠØ±' },
            'doctor': { password: 'doc123', role: 'doctor', name: 'Ø§Ù„Ø·Ø¨ÙŠØ¨' },
            'reception': { password: 'rec123', role: 'reception', name: 'Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„' },
            'pharmacist': { password: 'ph123', role: 'pharmacy', name: 'Ø§Ù„ØµÙŠØ¯Ù„ÙŠ' },
            'lab': { password: 'lab123', role: 'lab', name: 'Ø§Ù„Ù…Ø¹Ù…Ù„' },
            'nurse': { password: 'nur123', role: 'nursing', name: 'Ø§Ù„ØªÙ…Ø±ÙŠØ¶' }
        };

        let currentUser = null;
        let patients = JSON.parse(localStorage.getItem('shifa_pats')) || [];
        let labRequests = JSON.parse(localStorage.getItem('shifa_lab')) || [];
        let pharmOrders = JSON.parse(localStorage.getItem('shifa_rx')) || [];
        let nursingTasks = JSON.parse(localStorage.getItem('shifa_nursing_tasks')) || [];
        let financials = JSON.parse(localStorage.getItem('shifa_fin')) || { clinic: 0, lab: 0, pharSales: 0, pharProfit: 0, total: 0 };
        let staffMembers = JSON.parse(localStorage.getItem('shifa_staff')) || [];
        let medicalLibrary = JSON.parse(localStorage.getItem('shifa_library')) || [];
        let backups = JSON.parse(localStorage.getItem('shifa_backups')) || [];
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
        let labTests = JSON.parse(localStorage.getItem('shifa_labTests')) || [
            {name: 'CBC', price: 5000},
            {name: 'Malaria', price: 2000},
            {name: 'Glucose', price: 1000},
            {name: 'Cholesterol', price: 3000}
        ];
        
        let inventory = JSON.parse(localStorage.getItem('shifa_inventory')) || [
            {name: 'Panadol', price: 1000, qty: 100},
            {name: 'Antibiotic', price: 2500, qty: 50},
            {name: 'Vitamin C', price: 1500, qty: 75}
        ];

        // ============================================
        // Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        // ============================================

        function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±!');
                return;
            }
            
            if (USERS[username] && USERS[username].password === password) {
                currentUser = {
                    u: username,
                    r: USERS[username].role,
                    name: USERS[username].name
                };
                
                localStorage.setItem('shifa_user', JSON.stringify(currentUser));
                
                document.getElementById('loginOverlay').classList.add('hidden-section');
                document.getElementById('mainContent').classList.remove('hidden-section');
                document.getElementById('currentUserDisplay').textContent = `ğŸ‘¤ ${currentUser.name}`;
                
                // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¯ÙŠØ±Ø§Ù‹
                if (currentUser.r === 'admin') {
                    initAdminSection();
                    switchSection('admin');
                } else {
                    switchSection(currentUser.r);
                }
                
                showNotification(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}`, `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… ${currentUser.name} Ø¨Ù†Ø¬Ø§Ø­!`);
            } else {
                alert('âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!');
            }
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function registerPatient() {
            const name = document.getElementById('pName').value.trim();
            const age = document.getElementById('pAge').value;
            const ticket = parseFloat(document.getElementById('pTicket').value) || 2000;
            
            if (!name) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶!");
                return;
            }
            
            const patientId = Date.now();
            const newPatient = {
                id: patientId,
                name: name,
                age: age,
                gender: document.getElementById('pGender').value,
                phone: document.getElementById('pPhone').value.trim(),
                address: document.getElementById('pAddress').value,
                ticket: ticket,
                visitType: document.getElementById('pVisitType').value,
                medicalHistory: document.getElementById('pMedicalHistory').value,
                status: 'waiting_doctor',
                department: 'doctor',
                createdAt: new Date().toISOString(),
                time: new Date().toLocaleTimeString('ar-EG'),
                complaint: '',
                diagnosis: '',
                tests: [],
                meds: [],
                nursingInstructions: '',
                vitalSigns: {}
            };
            
            patients.push(newPatient);
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            financials.clinic += newPatient.ticket;
            localStorage.setItem('shifa_fin', JSON.stringify(financials));
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('pName').value = '';
            document.getElementById('pAge').value = '';
            document.getElementById('pPhone').value = '';
            document.getElementById('pAddress').value = '';
            document.getElementById('pMedicalHistory').value = '';
            
            showNotification("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„", `ØªÙ… ØªØ³Ø¬ÙŠÙ„ ${name} ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø·Ø¨ÙŠØ¨`);
            
            updateReceptionStats();
            updateBadges();
            loadReception();
        }

        function updateReceptionStats() {
            const today = new Date().toDateString();
            const todayPatients = patients.filter(p => new Date(p.createdAt).toDateString() === today);
            
            document.getElementById('receptionNewPatients').textContent = todayPatients.length;
            document.getElementById('receptionRevenue').textContent = (todayPatients.reduce((sum, p) => sum + (p.ticket || 0), 0)).toLocaleString();
        }

        function loadReception() {
            const container = document.getElementById('receptionList');
            const today = new Date().toDateString();
            const todayPatients = patients.filter(p => new Date(p.createdAt).toDateString() === today).reverse();
            
            let html = '';
            if (todayPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù„Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„ÙŠÙˆÙ…</p>';
            } else {
                todayPatients.forEach(patient => {
                    const statusBadge = patient.status === 'waiting_doctor' ? '<span class="badge bg-warning">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨</span>' :
                                      patient.status === 'waiting_lab' ? '<span class="badge bg-danger">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø¹Ù…Ù„</span>' :
                                      patient.status === 'waiting_pharmacy' ? '<span class="badge bg-warning">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</span>' :
                                      patient.status === 'waiting_nurse' ? '<span class="badge bg-purple">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙ…Ø±ÙŠØ¶</span>' :
                                      '<span class="badge bg-success">Ù…ÙƒØªÙ…Ù„</span>';
                    
                    html += `
                        <div class="card p-2 mb-2 bg-medical small">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <b>${patient.name}</b> (${patient.age || '--'}) 
                                    <div class="text-muted">${patient.visitType || 'Ø²ÙŠØ§Ø±Ø© Ø¹Ø§Ø¯ÙŠØ©'}</div>
                                </div>
                                <div class="text-end">
                                    ${statusBadge}
                                    <div class="text-muted">${patient.time || ''}</div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        function searchPatients(query) {
            const container = document.getElementById('receptionList');
            const today = new Date().toDateString();
            const todayPatients = patients.filter(p => 
                new Date(p.createdAt).toDateString() === today &&
                (p.name.toLowerCase().includes(query.toLowerCase()) ||
                 p.phone?.includes(query) ||
                 p.id.toString().includes(query))
            ).reverse();
            
            let html = '';
            if (todayPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</p>';
            } else {
                todayPatients.forEach(patient => {
                    const statusBadge = patient.status === 'waiting_doctor' ? '<span class="badge bg-warning">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨</span>' :
                                      patient.status === 'waiting_lab' ? '<span class="badge bg-danger">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø¹Ù…Ù„</span>' :
                                      patient.status === 'waiting_pharmacy' ? '<span class="badge bg-warning">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</span>' :
                                      patient.status === 'waiting_nurse' ? '<span class="badge bg-purple">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙ…Ø±ÙŠØ¶</span>' :
                                      '<span class="badge bg-success">Ù…ÙƒØªÙ…Ù„</span>';
                    
                    html += `
                        <div class="card p-2 mb-2 bg-medical small">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <b>${patient.name}</b> (${patient.age || '--'})
                                </div>
                                <div class="text-end">
                                    ${statusBadge}
                                    <div class="text-muted">${patient.time || ''}</div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function loadDoctorLists() {
            const labSelect = document.getElementById('labSelect');
            const medSelect = document.getElementById('medicineSelect');
            
            labSelect.innerHTML = labTests.map(test => 
                `<option value="${test.name}">${test.name} (${test.price} Ø¬)</option>`
            ).join('');
            
            medSelect.innerHTML = inventory.map(item => 
                `<option value="${item.name}">${item.name} (${item.price} Ø¬ - Ù…ØªÙˆÙØ±: ${item.qty})</option>`
            ).join('');
        }

        function loadDoctor() {
            const container = document.getElementById('doctorQueue');
            const waitingPatients = patients.filter(p => p.status === 'waiting_doctor');
            
            let html = '';
            if (waitingPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>';
            } else {
                waitingPatients.forEach(patient => {
                    html += `
                        <button class="btn btn-light w-100 mb-2 border text-start" onclick="selectDoctorPatient(${patient.id})">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>${patient.name}</strong>
                                    <div class="small text-muted">${patient.age} Ø³Ù†Ø© | ${patient.visitType}</div>
                                </div>
                                <span class="badge bg-warning">${patient.time || ''}</span>
                            </div>
                        </button>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        function selectDoctorPatient(id) {
            const patient = patients.find(p => p.id === id);
            if (!patient) return;
            
            document.getElementById('doctorWorkArea').classList.remove('hidden-section');
            document.getElementById('currentPatientName').textContent = patient.name;
            document.getElementById('currentPatientDetails').innerHTML = `
                Ø§Ù„Ø¹Ù…Ø±: ${patient.age} Ø³Ù†Ø© | Ø§Ù„Ø¬Ù†Ø³: ${patient.gender} | Ø§Ù„Ø²ÙŠØ§Ø±Ø©: ${patient.visitType}
            `;
            document.getElementById('selectedPatientId').value = patient.id;
            document.getElementById('complaint').value = patient.complaint || '';
            document.getElementById('diagnosis').value = patient.diagnosis || '';
            document.getElementById('nursingInstructions').value = patient.nursingInstructions || '';
            document.getElementById('vitalBP').value = patient.vitalSigns?.bp || '';
            document.getElementById('vitalTemp').value = patient.vitalSigns?.temp || '';
            document.getElementById('vitalPulse').value = patient.vitalSigns?.pulse || '';
            document.getElementById('vitalWeight').value = patient.vitalSigns?.weight || '';
            
            // ØªØ­Ù…ÙŠÙ„ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ÙØ­ÙˆØµØ§Øª ÙˆØ§Ù„Ø£Ø¯ÙˆÙŠØ©
            loadDoctorLists();
        }

        function orderLab() {
            const patientId = document.getElementById('selectedPatientId').value;
            if (!patientId) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±ÙŠØ¶ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            const patient = patients.find(p => p.id == patientId);
            const selectedTests = Array.from(document.getElementById('labSelect').selectedOptions)
                .map(option => option.value);
            
            if (selectedTests.length === 0) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙØ­ÙˆØµØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }
            
            patient.tests = selectedTests.map(name => ({
                name,
                price: labTests.find(t => t.name === name)?.price || 0,
                result: ''
            }));
            patient.complaint = document.getElementById('complaint').value;
            patient.diagnosis = document.getElementById('diagnosis').value;
            patient.nursingInstructions = document.getElementById('nursingInstructions').value;
            patient.vitalSigns = {
                bp: document.getElementById('vitalBP').value,
                temp: document.getElementById('vitalTemp').value,
                pulse: document.getElementById('vitalPulse').value,
                weight: document.getElementById('vitalWeight').value
            };
            patient.status = 'waiting_lab';
            patient.department = 'lab';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadDoctor();
            updateBadges();
            showNotification('ğŸ§ª ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${patient.name} Ù„Ù„Ù…Ø¹Ù…Ù„`);
        }

        function orderPharmacy() {
            const patientId = document.getElementById('selectedPatientId').value;
            if (!patientId) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±ÙŠØ¶ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            const patient = patients.find(p => p.id == patientId);
            const selectedMeds = Array.from(document.getElementById('medicineSelect').selectedOptions)
                .map(option => option.value);
            
            if (selectedMeds.length === 0) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø£Ø¯ÙˆÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
                return;
            }
            
            patient.meds = selectedMeds.map(name => ({
                name,
                price: inventory.find(i => i.name === name)?.price || 0
            }));
            patient.complaint = document.getElementById('complaint').value;
            patient.diagnosis = document.getElementById('diagnosis').value;
            patient.nursingInstructions = document.getElementById('nursingInstructions').value;
            patient.vitalSigns = {
                bp: document.getElementById('vitalBP').value,
                temp: document.getElementById('vitalTemp').value,
                pulse: document.getElementById('vitalPulse').value,
                weight: document.getElementById('vitalWeight').value
            };
            patient.status = 'waiting_pharmacy';
            patient.department = 'pharmacy';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadDoctor();
            updateBadges();
            showNotification('ğŸ’Š ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${patient.name} Ù„Ù„ØµÙŠØ¯Ù„ÙŠØ©`);
        }

        function orderNurse() {
            const patientId = document.getElementById('selectedPatientId').value;
            if (!patientId) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±ÙŠØ¶ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            const patient = patients.find(p => p.id == patientId);
            const instructions = document.getElementById('nursingInstructions').value;
            
            if (!instructions.trim()) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ¶!');
                return;
            }
            
            patient.nursingInstructions = instructions;
            patient.complaint = document.getElementById('complaint').value;
            patient.diagnosis = document.getElementById('diagnosis').value;
            patient.vitalSigns = {
                bp: document.getElementById('vitalBP').value,
                temp: document.getElementById('vitalTemp').value,
                pulse: document.getElementById('vitalPulse').value,
                weight: document.getElementById('vitalWeight').value
            };
            patient.status = 'waiting_nurse';
            patient.department = 'nursing';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadDoctor();
            updateBadges();
            showNotification('ğŸ’‰ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${patient.name} Ù„Ù„ØªÙ…Ø±ÙŠØ¶`);
        }

        function completeDoctorVisit() {
            const patientId = document.getElementById('selectedPatientId').value;
            if (!patientId) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±ÙŠØ¶ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            const patient = patients.find(p => p.id == patientId);
            
            patient.complaint = document.getElementById('complaint').value;
            patient.diagnosis = document.getElementById('diagnosis').value;
            patient.nursingInstructions = document.getElementById('nursingInstructions').value;
            patient.vitalSigns = {
                bp: document.getElementById('vitalBP').value,
                temp: document.getElementById('vitalTemp').value,
                pulse: document.getElementById('vitalPulse').value,
                weight: document.getElementById('vitalWeight').value
            };
            patient.status = 'completed';
            patient.department = 'completed';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadDoctor();
            updateBadges();
            
            document.getElementById('doctorWorkArea').classList.add('hidden-section');
            showNotification('âœ… ØªÙ… Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„', `ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ ÙƒØ´Ù ${patient.name} Ø¨Ù†Ø¬Ø§Ø­`);
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù…Ù„ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function loadLab() {
            const container = document.getElementById('labList');
            const waitingPatients = patients.filter(p => p.status === 'waiting_lab');
            
            let html = '';
            if (waitingPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙØ­ÙˆØµØ§Øª</p>';
            } else {
                waitingPatients.forEach(patient => {
                    const total = patient.tests.reduce((sum, t) => sum + (t.price || 0), 0);
                    
                    html += `
                        <div class="col-md-6">
                            <div class="card p-3 border-start border-danger border-5">
                                <h6>${patient.name} <span class="badge bg-dark float-end">${total.toLocaleString()} Ø¬</span></h6>
                                <div class="small text-muted">${patient.age} Ø³Ù†Ø© | ${patient.complaint || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´ÙƒÙˆÙ‰'}</div>
                                
                                <div class="mt-3">
                                    ${patient.tests.map((t, index) => `
                                        <div class="mb-2">
                                            <label class="form-label small">${t.name}</label>
                                            <input type="text" class="form-control form-control-sm" 
                                                placeholder="Ù†ØªÙŠØ¬Ø© ${t.name}" 
                                                onchange="updateTestResult(${patient.id}, ${index}, this.value)">
                                        </div>
                                    `).join('')}
                                </div>
                                
                                <div class="mt-3">
                                    <textarea class="form-control form-control-sm mb-2" 
                                        placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙ†ÙŠØ©"
                                        onchange="updateLabNotes(${patient.id}, this.value)"></textarea>
                                    <button class="btn btn-danger btn-sm w-100" onclick="finishLab(${patient.id})">
                                        âœ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø·Ø¨ÙŠØ¨
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        function updateTestResult(patientId, testIndex, result) {
            const patient = patients.find(p => p.id === patientId);
            if (patient && patient.tests[testIndex]) {
                patient.tests[testIndex].result = result;
                localStorage.setItem('shifa_pats', JSON.stringify(patients));
            }
        }

        function updateLabNotes(patientId, notes) {
            const patient = patients.find(p => p.id === patientId);
            if (patient) {
                patient.labNotes = notes;
                localStorage.setItem('shifa_pats', JSON.stringify(patients));
            }
        }

        function finishLab(id) {
            const patient = patients.find(p => p.id === id);
            if (!patient) return;
            
            // Ø­Ø³Ø§Ø¨ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ù…Ù„
            const labTotal = patient.tests.reduce((sum, t) => sum + (t.price || 0), 0);
            financials.lab += labTotal;
            localStorage.setItem('shifa_fin', JSON.stringify(financials));
            
            patient.status = 'waiting_doctor';
            patient.department = 'doctor';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadLab();
            updateBadges();
            updateFinancialStats();
            playNotify();
            
            showNotification('âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù†ØªØ§Ø¦Ø¬ ${patient.name} Ù„Ù„Ø·Ø¨ÙŠØ¨`);
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function loadPharmacy() {
            const container = document.getElementById('pharmacyList');
            const waitingPatients = patients.filter(p => p.status === 'waiting_pharmacy');
            
            let html = '';
            if (waitingPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±ÙˆØ´ØªØ§Øª Ù…Ù†ØªØ¸Ø±Ø©</p>';
            } else {
                waitingPatients.forEach(patient => {
                    const total = patient.meds.reduce((sum, m) => sum + (m.price || 0), 0);
                    
                    html += `
                        <div class="col-md-6">
                            <div class="card p-3 border-start border-warning border-5">
                                <h6>${patient.name} <span class="badge bg-warning text-dark float-end">${total.toLocaleString()} Ø¬</span></h6>
                                <div class="small text-muted">${patient.age} Ø³Ù†Ø© | ${patient.diagnosis || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ´Ø®ÙŠØµ'}</div>
                                
                                <div class="mt-3">
                                    <h6 class="small fw-bold">Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</h6>
                                    <ul class="small">
                                        ${patient.meds.map(med => `
                                            <li>
                                                ${med.name} - ${med.price.toLocaleString()} Ø¬
                                                <span class="badge bg-light text-dark float-end">
                                                    ${getMedQuantity(med.name)} Ù…ØªÙˆÙØ±
                                                </span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                                
                                <button class="btn btn-warning btn-sm w-100 mt-2" onclick="dispensePharmacy(${patient.id})">
                                    ğŸ’Š ØµØ±Ù ÙˆØ®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
                                </button>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        function getMedQuantity(medName) {
            const item = inventory.find(i => i.name === medName);
            return item ? item.qty : 0;
        }

        function dispensePharmacy(id) {
            const patient = patients.find(p => p.id === id);
            if (!patient) return;
            
            // Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            patient.meds.forEach(med => {
                const item = inventory.find(i => i.name === med.name);
                if (item && item.qty > 0) {
                    item.qty--;
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            const pharmacyTotal = patient.meds.reduce((sum, m) => sum + (m.price || 0), 0);
            financials.pharSales += pharmacyTotal;
            financials.pharProfit += pharmacyTotal * 0.3; // Ø±Ø¨Ø­ 30%
            localStorage.setItem('shifa_fin', JSON.stringify(financials));
            
            // Ø­ÙØ¸ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ø­Ø¯Ø«
            localStorage.setItem('shifa_inventory', JSON.stringify(inventory));
            
            patient.status = 'completed';
            patient.department = 'completed';
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadPharmacy();
            updateBadges();
            updateFinancialStats();
            
            showNotification('âœ… ØªÙ… Ø§Ù„ØµØ±Ù', `ØªÙ… ØµØ±Ù Ø£Ø¯ÙˆÙŠØ© ${patient.name} Ø¨Ù†Ø¬Ø§Ø­`);
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function loadNurse() {
            const container = document.getElementById('nurseList');
            const waitingPatients = patients.filter(p => p.status === 'waiting_nurse');
            
            let html = '';
            if (waitingPatients.length === 0) {
                html = '<p class="text-center text-muted p-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ØªÙ…Ø±ÙŠØ¶ÙŠØ©</p>';
            } else {
                waitingPatients.forEach(patient => {
                    html += `
                        <div class="col-md-6">
                            <div class="card p-3 border-start border-purple border-5">
                                <h6>${patient.name} <span class="badge bg-purple float-end">Ù…Ù‡Ù…Ø©</span></h6>
                                <div class="small text-muted">${patient.age} Ø³Ù†Ø©</div>
                                
                                <div class="mt-3">
                                    <h6 class="small fw-bold">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¨:</h6>
                                    <p class="bg-light p-2 rounded">${patient.nursingInstructions || 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ…Ø§Øª'}</p>
                                </div>
                                
                                <div class="mt-3">
                                    <textarea class="form-control form-control-sm mb-2" 
                                        placeholder="Ø³Ø¬Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ù…Ø©..."></textarea>
                                    <button class="btn btn-purple btn-sm w-100" onclick="completeNurseTask(${patient.id}, this)">
                                        âœ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        function completeNurseTask(id, button) {
            const patient = patients.find(p => p.id === id);
            if (!patient) return;
            
            const notes = button.previousElementSibling.value;
            
            patient.status = 'completed';
            patient.department = 'completed';
            patient.nursingTaskCompleted = new Date().toISOString();
            patient.nursingNotes = notes;
            
            localStorage.setItem('shifa_pats', JSON.stringify(patients));
            loadNurse();
            updateBadges();
            
            showNotification('âœ… ØªÙ… Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„', `ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ù„Ù€ ${patient.name}`);
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
        // ============================================

        function initAdminSection() {
            updateFinancialStats();
            updateFinancialTransactions();
            updateActiveStaff();
            updateAdminAlerts();
            updateRecentActivities();
            loadSystemSettings();
            refreshStaffTable();
            loadAdminPatientsTable();
            loadLabTestsList();
            loadInventoryList();
            searchMedicalLibrary();
        }

        function updateFinancialStats() {
            const today = new Date().toDateString();
            
            const todayPatients = patients.filter(p => new Date(p.createdAt).toDateString() === today);
            const todayLab = patients.filter(p => 
                p.tests && p.tests.length > 0 && 
                p.status === 'completed' &&
                new Date(p.createdAt).toDateString() === today
            );
            const todayRx = patients.filter(p => 
                p.meds && p.meds.length > 0 && 
                p.status === 'completed' &&
                new Date(p.createdAt).toDateString() === today
            );
            
            const clinicRevenue = todayPatients.reduce((sum, p) => sum + (p.ticket || 0), 0);
            const labRevenue = todayLab.reduce((sum, p) => 
                sum + p.tests.reduce((s, t) => s + (t.price || 0), 0), 0);
            const pharRevenue = todayRx.reduce((sum, p) => 
                sum + p.meds.reduce((s, m) => s + (m.price || 0), 0), 0);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('admIncClinic').textContent = clinicRevenue.toLocaleString();
            document.getElementById('admIncLab').textContent = labRevenue.toLocaleString();
            document.getElementById('admIncPhar').textContent = pharRevenue.toLocaleString();
            document.getElementById('admIncTotal').textContent = (clinicRevenue + labRevenue + pharRevenue).toLocaleString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
            document.getElementById('dailyClinicRevenue').textContent = clinicRevenue.toLocaleString();
            document.getElementById('dailyLabRevenue').textContent = labRevenue.toLocaleString();
            document.getElementById('dailyPharmacyRevenue').textContent = pharRevenue.toLocaleString();
            document.getElementById('dailyTotalRevenue').textContent = (clinicRevenue + labRevenue + pharRevenue).toLocaleString();
            
            document.getElementById('totalPatientsCount').textContent = patients.length;
            document.getElementById('totalStaffCount').textContent = staffMembers.length;
            document.getElementById('totalInventoryItems').textContent = inventory.length;
            document.getElementById('totalRevenueAll').textContent = (financials.total || 0).toLocaleString();
            
            document.getElementById('todayNewPatients').textContent = todayPatients.length;
            document.getElementById('todayCompletedTests').textContent = todayLab.length;
            document.getElementById('todayDispensedRx').textContent = todayRx.length;
            document.getElementById('todayNursingTasks').textContent = patients.filter(p => 
                p.nursingInstructions && 
                p.status === 'completed' &&
                new Date(p.createdAt).toDateString() === today
            ).length;
        }

        function loadLabTestsList() {
            const container = document.getElementById('labTestsList');
            container.innerHTML = labTests.map(test => `
                <div class="border-bottom pb-2 mb-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>${test.name}</strong>
                            <div class="small text-muted">${test.price.toLocaleString()} Ø¬</div>
                        </div>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteLabTest('${test.name}')">Ø­Ø°Ù</button>
                    </div>
                </div>
            `).join('');
        }

        function loadInventoryList() {
            const container = document.getElementById('inventoryList');
            container.innerHTML = inventory.map(item => `
                <div class="border-bottom pb-2 mb-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong>${item.name}</strong>
                            <div class="small text-muted">
                                ${item.price.toLocaleString()} Ø¬ | Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.qty}
                            </div>
                        </div>
                        <button class="btn btn-sm btn-outline-warning" onclick="deleteInventoryItem('${item.name}')">Ø­Ø°Ù</button>
                    </div>
                </div>
            `).join('');
        }

        function adminAddLab() {
            const name = document.getElementById('admLabName').value.trim();
            const price = parseFloat(document.getElementById('admLabPrice').value);
            
            if (!name || !price || price <= 0) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ÙˆØ³Ø¹Ø± ØµØ§Ù„Ø­ÙŠÙ† Ù„Ù„ÙØ­Øµ!');
                return;
            }
            
            if (labTests.some(test => test.name === name)) {
                alert('âš ï¸ Ù‡Ø°Ø§ Ø§Ù„ÙØ­Øµ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„!');
                return;
            }
            
            labTests.push({ name, price });
            localStorage.setItem('shifa_labTests', JSON.stringify(labTests));
            
            document.getElementById('admLabName').value = '';
            document.getElementById('admLabPrice').value = '';
            
            loadLabTestsList();
            showNotification('âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©', `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ÙØ­Øµ ${name} Ø¨Ù†Ø¬Ø§Ø­`);
        }

        function adminAddMed() {
            const name = document.getElementById('admMedName').value.trim();
            const price = parseFloat(document.getElementById('admMedPrice').value);
            const qty = parseInt(document.getElementById('admMedQty').value);
            
            if (!name || !price || price <= 0 || !qty || qty <= 0) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¯ÙˆØ§Ø¡!');
                return;
            }
            
            const existingItem = inventory.find(item => item.name === name);
            if (existingItem) {
                existingItem.price = price;
                existingItem.qty += qty;
            } else {
                inventory.push({ name, price, qty });
            }
            
            localStorage.setItem('shifa_inventory', JSON.stringify(inventory));
            
            document.getElementById('admMedName').value = '';
            document.getElementById('admMedPrice').value = '';
            document.getElementById('admMedQty').value = '';
            
            loadInventoryList();
            showNotification('âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©', `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ©/ØªØ­Ø¯ÙŠØ« ${name} ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†`);
        }

        function deleteLabTest(name) {
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ÙØ­Øµ ${name}ØŸ`)) {
                labTests = labTests.filter(test => test.name !== name);
                localStorage.setItem('shifa_labTests', JSON.stringify(labTests));
                loadLabTestsList();
                showNotification('ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ø­Ø°Ù', `ØªÙ… Ø­Ø°Ù ÙØ­Øµ ${name}`);
            }
        }

        function deleteInventoryItem(name) {
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ${name} Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†ØŸ`)) {
                inventory = inventory.filter(item => item.name !== name);
                localStorage.setItem('shifa_inventory', JSON.stringify(inventory));
                loadInventoryList();
                showNotification('ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ø­Ø°Ù', `ØªÙ… Ø­Ø°Ù ${name} Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†`);
            }
        }

        function renderReport(type) {
            const reportArea = document.getElementById('reportArea');
            let reportHTML = '';
            const today = new Date();
            
            switch(type) {
                case 'day':
                    const dayPatients = patients.filter(p => 
                        new Date(p.createdAt).toDateString() === today.toDateString()
                    );
                    reportHTML = `
                        <h6>ğŸ“Š ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ - ${today.toLocaleDateString('ar-EG')}</h6>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø¶Ù‰:</strong> ${dayPatients.length}</p>
                                <p><strong>Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙˆÙ†:</strong> ${dayPatients.filter(p => p.status === 'completed').length}</p>
                                <p><strong>ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</strong> ${dayPatients.filter(p => p.status !== 'completed').length}</p>
                            </div>
                            <div class="col-6">
                                <p><strong>Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©:</strong> ${dayPatients.reduce((s,p) => s + (p.ticket||0), 0).toLocaleString()} Ø¬</p>
                                <p><strong>ÙØ­ÙˆØµØ§Øª Ù…Ø¹Ù…Ù„:</strong> ${dayPatients.filter(p => p.tests?.length > 0).length}</p>
                                <p><strong>Ø±ÙˆØ´ØªØ§Øª ØµÙŠØ¯Ù„ÙŠØ©:</strong> ${dayPatients.filter(p => p.meds?.length > 0).length}</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'week':
                    const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
                    const weekPatients = patients.filter(p => new Date(p.createdAt) >= weekAgo);
                    reportHTML = `
                        <h6>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h6>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø¶Ù‰:</strong> ${weekPatients.length}</p>
                                <p><strong>Ù…ØªÙˆØ³Ø· ÙŠÙˆÙ…ÙŠ:</strong> ${Math.round(weekPatients.length / 7)}</p>
                                <p><strong>Ø£Ø¹Ù„Ù‰ ÙŠÙˆÙ…:</strong> ${getBusiestDay(weekPatients)}</p>
                            </div>
                            <div class="col-6">
                                <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:</strong> ${weekPatients.reduce((s,p) => s + (p.ticket||0), 0).toLocaleString()} Ø¬</p>
                                <p><strong>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:</strong> ${Math.round(weekPatients.reduce((s,p) => s + (p.ticket||0), 0) / 7).toLocaleString()} Ø¬/ÙŠÙˆÙ…</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'month':
                    const monthPatients = patients.filter(p => 
                        new Date(p.createdAt).getMonth() === today.getMonth() &&
                        new Date(p.createdAt).getFullYear() === today.getFullYear()
                    );
                    reportHTML = `
                        <h6>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ - ${today.toLocaleDateString('ar-EG', {month: 'long', year: 'numeric'})}</h6>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø¶Ù‰:</strong> ${monthPatients.length}</p>
                                <p><strong>Ù…Ø±Ø¶Ù‰ Ø¬Ø¯Ø¯:</strong> ${monthPatients.filter(p => p.visitType === 'Ø²ÙŠØ§Ø±Ø© Ø¹Ø§Ø¯ÙŠØ©').length}</p>
                                <p><strong>Ù…ØªØ§Ø¨Ø¹Ø§Øª:</strong> ${monthPatients.filter(p => p.visitType === 'Ù…ØªØ§Ø¨Ø¹Ø©').length}</p>
                            </div>
                            <div class="col-6">
                                <p><strong>Ø·ÙˆØ§Ø±Ø¦:</strong> ${monthPatients.filter(p => p.visitType === 'Ø·ÙˆØ§Ø±Ø¦').length}</p>
                                <p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:</strong> ${monthPatients.reduce((s,p) => s + (p.ticket||0), 0).toLocaleString()} Ø¬</p>
                                <p><strong>Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø©:</strong> ${Math.round(monthPatients.reduce((s,p) => s + (p.ticket||0), 0) / monthPatients.length || 0).toLocaleString()} Ø¬</p>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            reportArea.innerHTML = reportHTML;
        }

        function getBusiestDay(patients) {
            const days = {};
            patients.forEach(p => {
                const day = new Date(p.createdAt).toLocaleDateString('ar-EG');
                days[day] = (days[day] || 0) + 1;
            });
            
            const busiest = Object.entries(days).sort((a, b) => b[1] - a[1])[0];
            return busiest ? `${busiest[0]} (${busiest[1]} Ù…Ø±ÙŠØ¶)` : 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª';
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø©
        // ============================================

        function switchSection(id) {
            if (currentUser.r === 'admin') {
                // Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            } else if (currentUser.r !== id) {
                alert(`â›” Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù‚Ø³Ù… ${id}!`);
                return;
            }
            
            document.querySelectorAll('.section-pane').forEach(s => s.classList.add('hidden-section'));
            document.getElementById(`${id}-sec`).classList.remove('hidden-section');
            
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            document.getElementById(`btn-${id}`)?.classList.add('active');
            
            switch(id) {
                case 'reception':
                    updateReceptionStats();
                    loadReception();
                    break;
                case 'doctor':
                    loadDoctor();
                    loadDoctorLists();
                    break;
                case 'lab':
                    loadLab();
                    break;
                case 'pharmacy':
                    loadPharmacy();
                    break;
                case 'nursing':
                    loadNurse();
                    break;
                case 'admin':
                    initAdminSection();
                    showAdminTab('dashboard');
                    break;
            }
            
            updateBadges();
        }

        function updateBadges() {
            const waitingDoctor = patients.filter(p => p.status === 'waiting_doctor').length;
            const waitingLab = patients.filter(p => p.status === 'waiting_lab').length;
            const waitingPharmacy = patients.filter(p => p.status === 'waiting_pharmacy').length;
            const waitingNurse = patients.filter(p => p.status === 'waiting_nurse').length;
            
            updateBadge('doctorBadge', waitingDoctor);
            updateBadge('labBadge', waitingLab);
            updateBadge('pharBadge', waitingPharmacy);
            updateBadge('nurseBadge', waitingNurse);
        }

        function updateBadge(elementId, count) {
            const element = document.getElementById(elementId);
            if (count > 0) {
                element.textContent = count;
                element.classList.remove('hidden-section');
            } else {
                element.classList.add('hidden-section');
            }
        }

        function logout() {
            localStorage.removeItem('shifa_user');
            location.reload();
        }

        function showNotification(title, message) {
            console.log(`ğŸ”” ${title}: ${message}`);
            
            try {
                document.getElementById('notificationSound').play();
            } catch (e) {}
            
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, {
                    body: message,
                    icon: 'https://cdn-icons-png.flaticon.com/512/822/822118.png'
                });
            }
        }

        function playNotify() {
            try {
                document.getElementById('notificationSound').play();
            } catch (e) {}
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('clockDisplay').textContent = now.toLocaleTimeString('ar-EG');
        }

        // ============================================
        // Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ù† Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
        // ============================================

        function showAdminTab(tab) {
            const tabs = ['dashboard', 'reports', 'patients', 'staff', 'financial', 'labTests', 'inventory', 'settings'];
            tabs.forEach(t => document.getElementById(`admin-${t}`).classList.add('hidden-section'));
            document.getElementById(`admin-${tab}`).classList.remove('hidden-section');
        }

        function openUserMenu() {
            const modal = new bootstrap.Modal(document.getElementById('userMenuModal'));
            document.getElementById('userNameDisplay').textContent = currentUser.name;
            document.getElementById('userRoleDisplay').textContent = currentUser.r === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 
                                                                    currentUser.r === 'doctor' ? 'Ø·Ø¨ÙŠØ¨' :
                                                                    currentUser.r === 'reception' ? 'Ø§Ø³ØªÙ‚Ø¨Ø§Ù„' :
                                                                    currentUser.r === 'pharmacy' ? 'ØµÙŠØ¯Ù„ÙŠ' :
                                                                    currentUser.r === 'lab' ? 'Ù…Ø¹Ù…Ù„' : 'ØªÙ…Ø±ÙŠØ¶';
            modal.show();
        }

        function changePasswordModal() {
            const modal = new bootstrap.Modal(document.getElementById('changePasswordModal'));
            modal.show();
        }

        // ============================================
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        // ============================================

        window.onload = function() {
            updateClock();
            setInterval(updateClock, 1000);
            
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            const savedUser = localStorage.getItem('shifa_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('loginOverlay').classList.add('hidden-section');
                document.getElementById('mainContent').classList.remove('hidden-section');
                document.getElementById('currentUserDisplay').textContent = `ğŸ‘¤ ${currentUser.name}`;
                
                if (currentUser.r === 'admin') {
                    initAdminSection();
                    switchSection('admin');
                } else {
                    switchSection(currentUser.r);
                }
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            if (staffMembers.length === 0) {
                staffMembers = Object.keys(USERS).map(username => ({
                    u: username,
                    p: USERS[username].password,
                    r: USERS[username].role,
                    name: USERS[username].name,
                    status: 'active',
                    created: new Date().toISOString()
                }));
                localStorage.setItem('shifa_staff', JSON.stringify(staffMembers));
            }
            
            if (medicalLibrary.length === 0) {
                medicalLibrary = [
                    {
                        id: 1,
                        title: 'Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ',
                        category: 'diseases',
                        content: 'Ù…Ø±Ø¶ Ù…Ø²Ù…Ù† ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¹Ø¬Ø² Ø§Ù„Ø¨Ù†ÙƒØ±ÙŠØ§Ø³ Ø¹Ù† Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø¥Ù†Ø³ÙˆÙ„ÙŠÙ† Ø¨ÙƒÙ…ÙŠØ© ÙƒØ§ÙÙŠØ©...',
                        addedBy: 'system',
                        addedAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        title: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„',
                        category: 'drugs',
                        content: 'Ù…Ø³ÙƒÙ† Ù„Ù„Ø£Ù„Ù… ÙˆØ®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©ØŒ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…Ø¹ØªØ§Ø¯Ø© 500-1000 Ù…Ø¬Ù… ÙƒÙ„ 6-8 Ø³Ø§Ø¹Ø§Øª...',
                        addedBy: 'system',
                        addedAt: new Date().toISOString()
                    }
                ];
                localStorage.setItem('shifa_library', JSON.stringify(medicalLibrary));
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ badges
            updateBadges();
        };
    </script>
</body>
</html>
